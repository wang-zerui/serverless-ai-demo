(function(){"use strict";var e={1580:function(e,t,n){var o=n(9242),r=n(4876),a=(n(2467),n(3396));const l=(0,a._)("div",{class:"logo"},null,-1),u=(0,a.Uk)(" 漫画风图片生成 "),i={key:0},s={class:"ant-upload-drag-icon"},c=(0,a._)("p",{class:"ant-upload-text"}," Transforming... ",-1),d={key:1},f={class:"ant-upload-drag-icon"},p=(0,a._)("p",{class:"ant-upload-text"}," 点击或拖动图片到这个区域 ",-1),g=(0,a.Uk)(" 保存 "),m=["src"],v=(0,a.Uk)(" 保存 "),w=["src"],y=(0,a.Uk)(" xinwuyun ©2022 Powerd by serverless and animeGAN2 ");function b(e,t,n,o,r,b){const h=(0,a.up)("a-layout-header"),_=(0,a.up)("loading-outlined"),k=(0,a.up)("inbox-outlined"),x=(0,a.up)("a-upload-dragger"),O=(0,a.up)("a-button"),U=(0,a.up)("a-card"),j=(0,a.up)("a-space"),P=(0,a.up)("a-layout-content"),S=(0,a.up)("a-layout-footer"),W=(0,a.up)("a-layout");return(0,a.wg)(),(0,a.j4)(W,{class:"layout"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{position:"fixed",zIndex:1,width:"100%",color:"white",fontSize:"16px"}},{default:(0,a.w5)((()=>[l,u])),_:1}),(0,a.Wm)(P,{style:{padding:"0 400px",marginTop:"80px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{ref:"up",name:"file",customRequest:e.upload,beforeUpload:e.beforeUpload,onDrop:e.handleDrop,disabled:e.loading},{default:(0,a.w5)((()=>[e.loading?((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("p",s,[(0,a.Wm)(_)]),c])):((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("p",f,[(0,a.Wm)(k)]),p]))])),_:1},8,["customRequest","beforeUpload","onDrop","disabled"]),e.imageUrl?((0,a.wg)(),(0,a.j4)(j,{key:0,class:"result"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{title:"原图",style:{width:"100%"}},{extra:(0,a.w5)((()=>[(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[g])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("img",{src:e.imageUrl,alt:""},null,8,m)])),_:1}),e.animeUrl?((0,a.wg)(),(0,a.j4)(U,{key:0,title:"转换结果",style:{width:"100%"}},{extra:(0,a.w5)((()=>[(0,a.Wm)(O,null,{default:(0,a.w5)((()=>[v])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("img",{src:e.animeUrl,alt:""},null,8,w)])),_:1})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(S,{style:{textAlign:"center"}},{default:(0,a.w5)((()=>[y])),_:1})])),_:1})}var h=n(8269),_=n(2510),k=n(252),x=n(4870),O=n(7758),U=n.n(O),j=(0,a.aZ)({components:{InboxOutlined:h.Z,LoadingOutlined:_.Z},setup(){const e=(0,x.iH)(null),t=(0,x.iH)(""),n=(0,x.iH)(""),o=(0,x.iH)(!1),r=e=>new Promise((t=>{new(U())(e,{quality:.5,success:t,error(e){console.log(e.message)}})})),a=e=>(o.value=!0,!(e.size>102400)||(k.ZP.error("图片过大，请上传小于100k的图片"),o.value=!1,!1)),l=async a=>{o.value=!0,n.value="",t.value="";const l=new FileReader;let u=a.file;return a.file.size>102400?(k.ZP.error("图片过大，请上传小于100k的图片"),o.value=!1,e.value.abort(),void a.onError()):(a.file.size>51200&&(u=await r(u),console.log(u)),l.readAsDataURL(u),l.onloadend=function(r){const l=r.target.result.toString().split(",")[1];if(t.value=`data:image/jpg;base64, ${l}`,r&&r.target&&r.target.result){var u=JSON.stringify({image:l}),i={method:"POST",body:u};fetch("https://image-server-cloud-homework-bmntzdwfom.cn-hangzhou.fcapp.run/images/comic_style",i).then((e=>e.json())).then((e=>{const t=e.photo;n.value=t,o.value=!1,k.ZP.success("转换成功"),a.onSuccess()})).catch((t=>{k.ZP.error(`转换失败${t}`),e.value.abort(),a.onError()}))}},!0)};return{title:"漫画风图片生成",up:e,imageUrl:t,animeUrl:n,loading:o,upload:l,beforeUpload:a,fileList:(0,x.iH)([]),handleDrop:e=>{console.log(e)}}}}),P=n(89);const S=(0,P.Z)(j,[["render",b]]);var W=S;const Z=(0,o.ri)(W);Z.use(r.ZP).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],a=e[c][2];for(var u=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(u=!1,a<l&&(l=a));if(u){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,l=o[0],u=o[1],i=o[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(r in u)n.o(u,r)&&(n.m[r]=u[r]);if(i)var c=i(n)}for(t&&t(o);s<l.length;s++)a=l[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkantd_demo"]=self["webpackChunkantd_demo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(1580)}));o=n.O(o)})();
//# sourceMappingURL=app.e95e0d68.js.map